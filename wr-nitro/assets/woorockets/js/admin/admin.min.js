(function(e){e.fn.WR_ImagesLoaded=function(j){var h=function(l,m){var k=new Image;k.onload=m;k.src=l};var g=this.find("img").toArray().map(function(k){return k.src});if(g.length){var i=0;e(g).each(function(k,l){h(l,function(){i++;if(i==g.length){j()}})})}else{j()}};function d(){var h=e("#tabs-container h2 a"),j=e(".tab-content .tab-pane"),i=window.location.hash,g=e(".trigger-tab");h.click(function(m){e(this).addClass("active");e(this).siblings().removeClass("active");var k=e(this).attr("href");j.removeClass("active");e(k).addClass("active");var l=e(this).attr("href");history.pushState({},"",l);m.preventDefault()});if(i){h.removeClass("active");j.removeClass("active");e('#tabs-container h2 a[href="'+i+'"]').addClass("active");e(i).addClass("active")}g.on("click",function(k){k.preventDefault();e(".tab-content > div").removeClass("active");e("#demos").addClass("active");e(h).removeClass("active");e(h[0]).addClass("active")})}function b(){e(".wr-scroll-animated").click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var h=e(this.hash);var g=e("#wpadminbar").outerHeight();h=h.length?h:e("[name="+this.hash.slice(1)+"]");if(h.length){e("html,body").animate({scrollTop:h.offset().top-g-100+"px"},800);return false}}})}function c(){e('a[target="thickbox"]').each(function(g,h){if(!e(h).prop("wr_override_thickbox")){e(h).click(function(n){n.preventDefault();var m=e(this).attr("data-width"),i=e(this).attr("data-height");if(m.substr(-1)=="%"){m=e(window).width()*(parseInt(m)/100)}if(i.substr(-1)=="%"){i=e(window).height()*(parseInt(i)/100)}var l=e(this).attr("href")+(e(this).attr("href").indexOf("?")>-1?"&":"?")+"width="+m+"&height="+i;tb_show(e(this).attr("title"),l);e("#TB_closeWindowButton, #TB_overlay").off("click",tb_remove);var j=this,k=function(){var p=e(j).attr("data-width"),o=e(j).attr("data-height");if(p.substr(-1)=="%"){p=e(window).width()*(parseInt(p)/100)}if(o.substr(-1)=="%"){o=e(window).height()*(parseInt(o)/100)}TB_WIDTH=(p*1)+30;TB_HEIGHT=(o*1)+40;ajaxContentW=TB_WIDTH-30;ajaxContentH=TB_HEIGHT-45;e("#TB_ajaxContent").css({width:ajaxContentW,height:ajaxContentH,});e("#TB_iframeContent").css({width:ajaxContentW+29,height:ajaxContentH+17,});tb_position()};e(window).on("resize",k);e("#TB_closeWindowButton, #TB_overlay").click(function(p){p.preventDefault();var o=e("#TB_closeWindowButton").attr("data-prevent-close");if(o){if(e(this).attr("id")=="TB_closeWindowButton"){return alert(o)}}else{tb_remove(p)}e(window).off("resize",k)});return false});e(h).prop("wr_override_thickbox",true)}})}function a(){var g;e("#plugins").on("click",".install-plugin, .uninstall-plugin",function(i){i.preventDefault();var k=e(this).hasClass("install-plugin")?"install":"uninstall";var h=e.trim(e(this).prev().text().replace(/[\s\t\r\n]{2,99}/g," "));if(confirm(wr_nitro_admin["confirm_"+k+"_plugin"].replace("%PLUGIN%",h))){e(this).hide().after('<span class="spinner is-active"></span>');var j=e.proxy(function(){if("install"==k){switch(g){case"js_composer":return setTimeout(j,1000);break}g=e(this).attr("data-plugin")}e.ajax({context:this,url:wr_nitro_admin[k+"_plugin_url"],type:"POST",dataType:"json",data:{plugin:e(this).attr("data-plugin"),nonce:wr_nitro_admin[k+"_plugin_nonce"],},complete:function(l){if(!l.responseJSON&&(l.responseJSON=l.responseText.match(/\{"success":.+\}/))){l.responseJSON=e.parseJSON(l.responseJSON[0])}if(!l.responseJSON||!l.responseJSON.success){if(l.responseJSON&&l.responseJSON.data){alert(l.responseJSON.data)}else{alert(l.responseText?l.responseText:wr_nitro_admin.unknown_error)}"install"==k&&(g=null)}else{e(this).removeClass(k+"-plugin").addClass((k=="install"?"uninstall":"install")+"-plugin");e(this).text(wr_nitro_admin[k=="install"?"uninstall":"install"]);if("install"==k){switch(g){case"js_composer":e.ajax({url:ajaxurl.replace("admin-ajax.php","index.php"),complete:function(){g=null}});break;default:g=null;break}}}e(this).show().next().remove()},})},this);j()}})}function f(){var g=e(".box-wrap.demos");g.WR_ImagesLoaded(function(){g.isotope({filter:"*",layoutMode:"fitRows"})});e(".filter-by-tag a").click(function(k){k.preventDefault();var j=e(this).attr("data-tag");e(".box-wrap.demos").isotope({filter:j,transitionDuration:"0.3s",})});var h=e(".filter-by-tag"),i=h.find("a");i.click(function(){var k=e(this);if(k.hasClass("current")){return false}var j=k.parents(".filter-by-tag");j.find(".current").removeClass("current");k.addClass("current")});e("#demos .install-sample, #demos .uninstall-sample").click(function(j){j.preventDefault();var l=e(this).hasClass("install-sample")?"install":"uninstall";var p=e.trim(e(this).parent().children("h5").text().replace(/[\s\t\r\n]{2,99}/g," "));var q=function(s){e("#TB_closeWindowButton").attr("data-prevent-close",wr_nitro_admin.close_prevented);e.ajax({url:wr_nitro_admin.install_sample_url,dataType:"json",data:{"package":s,step:2,nonce:wr_nitro_admin.install_sample_nonce,},complete:function(t){if(!t.responseJSON||!t.responseJSON.success){e("#wr-install-sample-data-download-package .spinner").removeClass("spinner").addClass("dashicons dashicons-no-alt");e("#wr-install-sample-data-download-package .wr-status").removeClass("hidden");if(t.responseJSON&&t.responseJSON.data){e("#wr-install-sample-data-download-package .wr-status").html(t.responseJSON.data)}else{if(t.responseText){e("#wr-install-sample-data-download-package .wr-status").html(t.responseText)}else{e("#wr-install-sample-data-download-package .wr-status").html(wr_nitro_admin.unknown_error)}}return m(s)}e("#wr-install-sample-data-download-package .spinner").removeClass("spinner").addClass("dashicons dashicons-yes");k(s)},})},m=function(s){e("#TB_closeWindowButton").removeAttr("data-prevent-close");e("#wr-install-sample-data-manually").removeClass("hidden");e("#wr-upload-sample-data").load(function(t){var u=e(this).contents().find("body").text(),v=e.parseJSON(u);if(!v||!v.success){e("#wr-install-sample-data-upload-package .spinner").removeClass("spinner").addClass("dashicons dashicons-no-alt");e("#wr-install-sample-data-upload-package .wr-status").removeClass("hidden");if(v&&v.data){e("#wr-install-sample-data-upload-package .wr-status").html(v.data)}else{if(u){e("#wr-install-sample-data-upload-package .wr-status").html(u)}else{e("#wr-install-sample-data-upload-package .wr-status").html(wr_nitro_admin.unknown_error)}}return n()}e("#wr-install-sample-data-upload-package .spinner").removeClass("spinner").addClass("dashicons dashicons-yes");k(s)});e("#wr-upload-sample-data-package").click(function(){e("#wr-install-sample-data-upload-package").removeClass("hidden");e("#wr-install-sample-data-manually").addClass("hidden");var t=e(this.form).find('input[name="nonce"]');if(!t.length){t=e('<input name="nonce" value="" />').appendTo(this.form)}t.val(wr_nitro_admin.install_sample_nonce);e(this.form).submit()})},k=e.proxy(function(s){e("#TB_closeWindowButton").attr("data-prevent-close",wr_nitro_admin.close_prevented);e("#wr-install-sample-data-import-data").removeClass("hidden");e("#nitro-manipulate-sample-data").off("load").load(e.proxy(function(u){var t={responseText:e(u.target).contents().find("body").text(),responseJSON:e(u.target).contents().find("body").text().match(/\{"success":.+\}/),};if(t.responseJSON){t.responseJSON=e.parseJSON(t.responseJSON[0])}if(!t.responseJSON||!t.responseJSON.success){e("#wr-install-sample-data-import-data .spinner").removeClass("spinner").addClass("dashicons dashicons-no-alt");e("#wr-install-sample-data-import-data .wr-status").removeClass("hidden");if(t.responseJSON&&t.responseJSON.data){e("#wr-install-sample-data-import-data .wr-status").html(t.responseJSON.data)}else{if(t.responseText){e("#wr-install-sample-data-import-data .wr-status").html(t.responseText)}else{e("#wr-install-sample-data-import-data .wr-status").html(wr_nitro_admin.unknown_error)}}return n()}var v=e.proxy(function(){e("#wr-install-sample-data-import-data .spinner").removeClass("spinner").addClass("dashicons dashicons-yes");e("#demos .uninstall-sample").addClass("hidden");e("#demos .install-sample").removeClass("hidden");e(this).addClass("hidden").parent().children(".uninstall-sample").removeClass("hidden");if(t.responseJSON.data&&t.responseJSON.data.required_plugins){return o(s,t.responseJSON.data)}if(t.responseJSON.data&&t.responseJSON.data.demo_assets){return r(s,t.responseJSON.data.demo_assets)}n(true)},this);if(t.responseJSON.data&&t.responseJSON.data.refresh_nonce){e.ajax({url:wr_nitro_admin.refresh_nonce_url,dataType:"json",data:{nonce:t.responseJSON.data.refresh_nonce},complete:function(w){if(w.responseJSON&&w.responseJSON.success){for(var x in w.responseJSON.data){wr_nitro_admin[x]=w.responseJSON.data[x]}}v()}})}else{v()}},this)).attr("src",wr_nitro_admin.install_sample_url+"&package="+s+"&step=3&nonce="+wr_nitro_admin.install_sample_nonce)},this),o=function(u,t){if(t.required_plugins.length){var s=function(v){v=v||0;e("#wr-install-sample-data-required-plugins .install-status").text((v+1)+"/"+t.required_plugins.length+": "+t.required_plugins[v]);e("#wr-install-sample-data-required-plugins .progress-bar").css("width",Math.round((v/t.required_plugins.length)*100)+"%");e("#wr-install-sample-data-required-plugins .percentage").text(Math.round((v/t.required_plugins.length)*100));return e.ajax({url:wr_nitro_admin.install_plugin_url,type:"POST",dataType:"json",data:{plugin:t.required_plugins[v],nonce:wr_nitro_admin.install_plugin_nonce,},complete:function(w){if(!w.responseJSON&&(w.responseJSON=w.responseText.match(/\{"success":.+\}/))){w.responseJSON=e.parseJSON(w.responseJSON[0])}if(!w.responseJSON||!w.responseJSON.success){e("#wr-install-sample-data-required-plugins .wr-status").removeClass("hidden");if(e("#wr-install-sample-data-required-plugins .wr-status").html()!=""){e("#wr-install-sample-data-required-plugins .wr-status").append("<hr>")}if(w.responseJSON&&w.responseJSON.data){var x=w.responseText.match(/<div class="error">(.+)<\/div>/);if(x){e("#wr-install-sample-data-required-plugins .wr-status").append(x[1])}else{e("#wr-install-sample-data-required-plugins .wr-status").append(w.responseJSON.data)}}else{e("#wr-install-sample-data-required-plugins .wr-status").append(wr_nitro_admin.install_plugin_failed.replace("%s",t.required_plugins[v]))}}if(v+1==t.required_plugins.length){e("#wr-install-sample-data-required-plugins .install-status").addClass("hidden");e("#wr-install-sample-data-required-plugins .progress").addClass("hidden");if(e("#wr-install-sample-data-required-plugins .wr-status").hasClass("hidden")){e("#wr-install-sample-data-required-plugins .spinner").removeClass("spinner").addClass("dashicons dashicons-yes");if(t.demo_assets){return r(u,t.demo_assets)}n(true)}else{e("#wr-install-sample-data-required-plugins .spinner").removeClass("spinner").addClass("dashicons dashicons-no-alt");n()}return}switch(t.required_plugins[v]){case"js_composer":e.ajax({url:ajaxurl.replace("admin-ajax.php","index.php"),complete:function(){s(v+1)}});break;default:s(v+1);break}},})};e("#wr-install-sample-data-required-plugins").removeClass("hidden");s()}else{if(t.demo_assets){return r(u,t.demo_assets)}n(true)}},r=function(u,t){var s=function(v){v=v||0;e("#wr-install-sample-data-demo-assets .download-status").text((v+1)+"/"+t.length+": "+t[v]);e("#wr-install-sample-data-demo-assets .progress-bar").css("width",Math.round((v/t.length)*100)+"%");e("#wr-install-sample-data-demo-assets .percentage").text(Math.round((v/t.length)*100));e.ajax({url:wr_nitro_admin.install_sample_url,data:{"package":u,step:4,asset:v,nonce:wr_nitro_admin.install_sample_nonce,},complete:function(){if(v+1==t.length){e("#wr-install-sample-data-demo-assets .spinner").removeClass("spinner").addClass("dashicons dashicons-yes");e("#wr-install-sample-data-demo-assets .download-status").addClass("hidden");e("#wr-install-sample-data-demo-assets .progress").addClass("hidden");return n(true)}s(v+1)},})};e("#wr-install-sample-data-demo-assets").removeClass("hidden");s()},n=function(s){e("#TB_closeWindowButton").removeAttr("data-prevent-close");if(s){e("#wr-install-sample-data-success-message").removeClass("hidden")}else{e("#wr-install-sample-data-failure-message").removeClass("hidden")}};switch(l){case"install":e.ajax({context:this,url:wr_nitro_admin.install_sample_url,dataType:"json",data:{"package":e(this).attr("data-package"),nonce:wr_nitro_admin.install_sample_nonce,},complete:function(s){if(!s.responseJSON||!s.responseJSON.data){e("#TB_ajaxContent").append(s.responseText?s.responseText:wr_nitro_admin.unknown_error)}else{e("#TB_ajaxContent").append(s.responseJSON.data);e("#TB_ajaxContent").on("click","#confirm-sample-data-installation",function(t){if(t.target.checked){e("#go-to-sample-data-installation-step-2").removeAttr("disabled")}else{e("#go-to-sample-data-installation-step-2").attr("disabled","disabled")}}).on("click","#cancel-sample-data-installation",function(t){e("#TB_closeWindowButton").trigger("click")}).on("click","#go-to-sample-data-installation-step-2",function(t){e("#sample-data-installation-step-1").addClass("hidden");e("#sample-data-installation-step-2").removeClass("hidden");q(e("#sample-data-installation-step-2").attr("data-package"))})}},});break;case"uninstall":e.ajax({context:this,url:wr_nitro_admin.uninstall_sample_url,dataType:"json",data:{"package":e(this).attr("data-package"),nonce:wr_nitro_admin.uninstall_sample_nonce,},complete:function(s){if(!s.responseJSON||!s.responseJSON.data){e("#TB_ajaxContent").append(s.responseText?s.responseText:wr_nitro_admin.unknown_error)}else{e("#TB_ajaxContent").append(s.responseJSON.data);e("#TB_ajaxContent").on("click","#confirm-sample-data-uninstallation",function(t){if(t.target.checked){e("#go-to-sample-data-installation-step-2").removeAttr("disabled")}else{e("#go-to-sample-data-installation-step-2").attr("disabled","disabled")}}).on("click","#cancel-sample-data-installation",function(t){e("#TB_closeWindowButton").trigger("click")}).on("click","#go-to-sample-data-installation-step-2",e.proxy(function(t){e("#demos").find(".install-sample, .uninstall-sample").attr("disabled","disabled");e(this).addClass("hidden").after('<span class="spinner is-active"></span>');e("#TB_closeWindowButton").trigger("click");e("#nitro-manipulate-sample-data").off("load").load(e.proxy(function(v){var u={responseText:e(v.target).contents().find("body").text(),responseJSON:e(v.target).contents().find("body").text().match(/\{"success":.+\}/),};if(u.responseJSON){u.responseJSON=e.parseJSON(u.responseJSON[0])}if(!u.responseJSON||!u.responseJSON.success){if(u.responseJSON&&u.responseJSON.data){alert(u.responseJSON.data)}else{alert(u.responseText?u.responseText:wr_nitro_admin.unknown_error)}e(this).removeClass("hidden").next().remove();return e("#demos").find(".install-sample, .uninstall-sample").removeAttr("disabled")}window.location.reload()},this)).attr("src",wr_nitro_admin.uninstall_sample_url+"&step=2&package="+e(this).attr("data-package")+"&nonce="+wr_nitro_admin.uninstall_sample_nonce)},this))}},});break}})}e(document).ready(function(){d();b();c();a();f()})})(jQuery);